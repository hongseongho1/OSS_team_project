<script>
    window.onload = async () => {
      const params = new URLSearchParams(window.location.search);
      const gender = params.get("gender");
      const age = params.get("age");
      const style = params.get("style");
      const occasion = params.get("occasion");
  
      const url = `http://127.0.0.1:5000/recommend?gender=${gender}&age=${age}&style=${style}&occasion=${occasion}`;
      try {
        const response = await fetch(url);
        const result = await response.json();
  
        const container = document.getElementById("recommendation");
  
        if (result.recommendations) {
          result.recommendations.forEach(item => {
            const card = document.createElement("div");
            card.innerHTML = `
              <div class="border rounded-lg shadow p-4 m-2 text-center">
                <h3 class="text-xl font-semibold mb-2">${item.style} (${item.era}년대)</h3>
                <img src="/images/${item.imgName}" alt="${item.style}" class="mx-auto mb-2" width="200">
                <p>${item.description}</p>
              </div>
            `;
            container.appendChild(card);
          });
        } else {
          container.innerHTML = "<p>추천 결과가 없습니다.</p>";
        }
      } catch (error) {
        console.error("API 요청 실패:", error);
      }
    };
  </script>

